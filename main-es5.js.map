{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/mytest.ts","webpack:///src/app/test-scale/test-scale.component.ts","webpack:///src/app/test-scale/test-scale.component.html","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","AppRoutingModule","forRoot","imports","AppComponent","title","t","mytest","nativeElement","selector","templateUrl","styleUrls","AppModule","declarations","providers","bootstrap","Mytest","data","style","height","background","TestScaleComponent","svgWidth","svgHeight","axisRangeStart","axisRangeEnd","minRange","maxRange","_scale","dragToMoveDestroy$","updateSelection$","isDragging","selection","start","end","selectRender","axisWidth","scalewrapper","clientWidth","initAxisRenderRule","initScale","bindScroll","bindDragMove","initSelectionChangeHandler","next","pipe","subscribe","res","ticks","axisRenderRule","r","range","domain","updateSelectRender","renderRange","Math","ceil","lineDrawer","x","d","y","myscale","select","remove","bool","_this","axisSvg","attr","transition","call","tickSize","tickPadding","tickFormat","timeformat","addPathToRecover","number","hour","min","sec","secF","hourF","minF","newRange","currentScrollFrame","floor","offsetX","newAxisRangeEnd","newAxisRangeStart","preventDefault","deltaY","scrollToClose","scrollToAway","updateAxis","button","enableDragToMoveScale","window","disableDragToMoveScale","updateSelection","startpoint","distance","movementX","realDistance","$event","environment","production","bootstrapModule","err","console","error"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Mytest } from './mytest';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  title = 'voiceTest';\n\n  @ViewChild('mytest',{static:true}) mytest\n  constructor(){\n\n  }\n  ngOnInit(){\n    let t = new Mytest(this.mytest.nativeElement)\n\n    // t.update()\n  }\n}\n","\n<div style=\"padding:10px 20px\">\n  <app-test-scale></app-test-scale>\n</div>\n<div #mytest></div>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { TestScaleComponent } from './test-scale/test-scale.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    TestScaleComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    BrowserAnimationsModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","export class Mytest{\r\n  mytest\r\n  constructor(data){\r\n    this.mytest = data\r\n\r\n  }\r\n\r\n  update(){\r\n    this.mytest.style.height='700px'\r\n    this.mytest.style.background = 'red'\r\n  }\r\n}\r\n\r\n","\nimport { Component, OnInit, ViewChild, Input } from '@angular/core';\nimport * as D3 from 'd3'\nimport { fromEvent, Subject } from 'rxjs';\nimport {take, takeUntil, debounceTime, delay} from 'rxjs/operators'\n@Component({\n  selector: 'app-test-scale',\n  templateUrl: './test-scale.component.html',\n  styleUrls: ['./test-scale.component.css']\n})\nexport class TestScaleComponent implements OnInit {\n\n  @ViewChild('myscale',{static:true}) myscale\n  @ViewChild('scalewrapper',{static:true}) scalewrapper\n  @Input() svgWidth = '100%'\n  @Input() svgHeight = '100'\n\n  axisRenderRule\n  axisWidth\n\n  axisRangeStart = 0\n  axisRangeEnd = 6000\n  minRange = 0\n  maxRange = 6000\n\n  axisSvg\n\n  _scale = 3/4\n\n  dragToMoveDestroy$ = new Subject()\n\n  updateSelection$ = new Subject()\n\n  isDragging:boolean = false\n\n  selection:any = {\n    start:800,\n    end:2400\n  }\n  selectRender:any = {\n    end:0,\n    start:0\n  }\n\n  constructor() { }\n\n  ngOnInit() {\n\n    this.axisWidth = this.scalewrapper.nativeElement.clientWidth\n    // debugger\n\n    this.initAxisRenderRule()\n\n    this.initScale();\n    this.bindScroll();\n    this.bindDragMove()\n\n    this.initSelectionChangeHandler();\n    this.updateSelection$.next()\n  }\n  initSelectionChangeHandler(){\n    this.updateSelection$\n    .pipe(\n      // debounceTime(100),\n      // delay(100)\n    )\n    .subscribe(\n      res=>{\n\n        let ticks = this.axisRenderRule.ticks()\n        let r = this.axisRenderRule.range()\n        let range = r[1] - r[0]\n        let domain = this.axisRenderRule.domain()\n\n        this.updateSelectRender(ticks,range,domain)\n\n      }\n    )\n  }\n  updateSelectRender(ticks,range,domain){\n    let renderRange:any\n    if(this.selection.start>=domain[0] && this.selection.end<=domain[1]){\n      renderRange = this.selection\n    }else if (this.selection.start<domain[0] && this.selection.end>domain[1]){\n      renderRange = {\n        start:domain[0],\n        end:domain[1]\n      }\n    }else if (this.selection.start<domain[0] && this.selection.end<domain[1] && this.selection.end>=domain[0]){\n      renderRange = {\n        start:domain[0],\n        end:this.selection.end\n      }\n    }else if(this.selection.start>=domain[0] && this.selection.end>domain[1] && this.selection.start<=domain[1]){\n      renderRange = {\n        start:this.selection.start,\n        end:domain[1]\n      }\n    }else if (this.selection.end<=domain[0] || this.selection.start>=domain[1]){\n      renderRange = {\n        start:0,\n        end:0\n      }\n    };\n\n    this.selectRender = {\n      start:  Math.ceil((renderRange.start - domain[0])/(domain[1]-domain[0]) * range),\n      end:Math.ceil((renderRange.end - renderRange.start)/(domain[1]-domain[0]) * range)\n    }\n\n  }\n  initAxisRenderRule(){\n    this.axisRenderRule = D3.scaleLinear()\n    .domain([this.axisRangeStart,this.axisRangeEnd])\n    .range([20,(this.axisWidth- 20)])\n\n  }\n  addPathToRecover(){\n    let lineDrawer = D3.line().x(\n      function(d){\n        return d.x\n      }\n    ).y(\n      function(d){\n        return d.y\n      }\n    )\n\n    // D3.select(this.myscale.nativeElement)\n    // .append('path')\n    // .classed('recover',true)\n    // .attr('d',lineDrawer(\n    //   [\n    //     {x:19,y:30},\n    //     {x:this.axisWidth -19,y:30}\n    //   ]\n    // ))\n    // .attr('stroke','transparent')\n    // .attr('stroke-width','2px')\n\n    D3.select(this.myscale.nativeElement)\n    .select('path.domain')\n    .remove()\n\n  }\n  initScale(bool=true){\n    let _this = this\n    this.axisSvg = D3.select(this.myscale.nativeElement)\n    .select('g.xaxis')\n    .attr(\"transform\", `translate(0,${ 30})`)\n    .transition(2000)\n    .call(\n      D3.axisBottom(\n        _this.axisRenderRule\n      )\n      .tickSize(\n        40\n      )\n      .tickPadding(10)\n      .tickFormat(d=>{\n\n        return this.timeformat(d)\n\n      })\n    )\n\n    this.addPathToRecover()\n\n\n  }\n  updateAxis(number=2000){\n    D3.select(this.myscale.nativeElement)\n    .select('g.xaxis')\n    .transition(2000)\n    .call(\n      D3.axisBottom(\n        this.axisRenderRule\n      )\n      .tickSize(40)\n      .tickPadding(10)\n      .tickFormat(d=>{\n        return this.timeformat(d)\n      })\n    )\n\n    this.addPathToRecover()\n    this.updateSelection$.next(123)\n\n\n\n\n  }\n  timeformat(d){\n    let hour,min,sec\n    hour = (d-d%3600)/3600\n    min = ((d-3600*hour) - (d-3600*hour)%60)/60\n    sec = d - 3600*hour - min* 60\n\n    let secF = sec<10?`0${sec}`:sec\n    let hourF = hour<10?`0${hour}`:hour\n    let minF = min<10?`0${min}`:min\n\n    if(d==this.minRange){\n      return ''\n    }else if (d==this.maxRange){\n      return ''\n    }else{\n      return `${hourF}:${minF}:${secF}`\n    }\n  }\n\n  scrollToClose(res){\n    let newRange = Math.ceil((this.axisRangeEnd - this.axisRangeStart)* this._scale);\n    if(newRange<=10) return\n\n    const currentScrollFrame = this.axisRangeStart + Math.floor((this.axisRangeEnd - this.axisRangeStart)* (res.offsetX /this.axisWidth))\n\n    let newAxisRangeEnd = Math.floor(newRange/2) + currentScrollFrame >= this.maxRange? this.maxRange : Math.ceil(newRange/2) + currentScrollFrame ;\n    let newAxisRangeStart =  newAxisRangeEnd - newRange <= this.minRange?this.minRange :newAxisRangeEnd - newRange ;\n\n    this.axisRangeStart = newAxisRangeStart;\n    this.axisRangeEnd = newAxisRangeEnd\n  }\n  scrollToAway(res){\n    let newRange = Math.ceil((this.axisRangeEnd - this.axisRangeStart)/ this._scale);\n    const currentScrollFrame = this.axisRangeStart + Math.floor((this.axisRangeEnd - this.axisRangeStart)* (res.offsetX /this.axisWidth))\n    let newAxisRangeEnd,newAxisRangeStart\n\n    if(this.axisRangeEnd-currentScrollFrame < (currentScrollFrame-this.axisRangeStart)){\n      newAxisRangeEnd = Math.floor(newRange/2) + currentScrollFrame >= this.maxRange? this.maxRange : Math.ceil(newRange/2) + currentScrollFrame ;\n      newAxisRangeStart =  newAxisRangeEnd - newRange <= this.minRange?this.minRange :newAxisRangeEnd - newRange ;\n\n    }else{\n      newAxisRangeStart = currentScrollFrame - Math.floor(newRange/2) <=this.minRange?this.minRange : currentScrollFrame - Math.floor(newRange/2);\n      newAxisRangeEnd = newAxisRangeStart + newRange >= this.maxRange? this.maxRange: newAxisRangeStart + newRange\n\n    }\n\n    this.axisRangeStart = newAxisRangeStart;\n    this.axisRangeEnd = newAxisRangeEnd\n  }\n\n  bindScroll(){\n    fromEvent(this.myscale.nativeElement,'wheel')\n    .subscribe(\n      (res:WheelEvent)=>{\n        res.preventDefault()\n        if(res.deltaY>0){\n          this.scrollToClose(res)\n        }else{\n          this.scrollToAway(res)\n        }\n        this.initAxisRenderRule()\n        this.updateAxis()\n\n\n      }\n    )\n\n  }\n  bindDragMove(){\n    fromEvent(this.myscale.nativeElement,'mousedown')\n    .subscribe(\n      (res:MouseEvent)=>{\n        // debugger\n        res.preventDefault()\n        if(res.button === 0) {\n          this.enableDragToMoveScale(res)\n          this.isDragging = true\n          fromEvent(window,'mouseup')\n          .pipe(\n            take(1)\n          )\n          .subscribe(\n            res=>{\n              this.disableDragToMoveScale();\n              this.isDragging = false\n            }\n          )\n        }else if (res.button==2){\n          this.updateSelection(res);\n          this.isDragging = true\n          fromEvent(window,'mouseup')\n          .pipe(\n            take(1)\n          )\n          .subscribe(\n            res=>{\n              this.disableDragToMoveScale();\n              this.isDragging = false\n            }\n          )\n        }\n\n\n      }\n    )\n\n\n\n  }\n\n  updateSelection(res:MouseEvent){\n    res.preventDefault()\n\n\n    let r = this.axisRenderRule.range()\n    let range = r[1] - r[0]\n    let domain = this.axisRenderRule.domain()\n\n    let start = Math.ceil( ( res.offsetX - 20) /range * (domain[1]-domain[0]) + domain[0])\n\n\n    fromEvent(this.myscale.nativeElement,'mousemove')\n    .pipe(\n      takeUntil(\n        this.dragToMoveDestroy$\n      )\n    )\n    .subscribe(\n      (res:MouseEvent)=>{\n        let t = Math.ceil( (res.offsetX - 20) /range * (domain[1]-domain[0]) + domain[0] )\n\n        if(t>start){\n          this.selection = {\n            start:start,\n            end:t\n          }\n        }else{\n          this.selection = {\n            end:start,\n            start:t\n          }\n        }\n\n        this.updateSelection$.next( )\n      }\n    )\n\n\n  }\n\n  enableDragToMoveScale(startpoint:MouseEvent){\n    fromEvent(this.myscale.nativeElement,'mousemove')\n    .pipe(\n      takeUntil(\n        this.dragToMoveDestroy$\n      )\n    )\n    .subscribe(\n      (res:MouseEvent)=>{\n        res.preventDefault()\n\n        let distance = res.movementX;\n        let realDistance\n        let t = (this.axisRangeEnd-this.axisRangeStart)*(distance/this.axisWidth)\n\n        if(t>=0){\n          realDistance = t\n        }else{\n          realDistance = 0 - t\n        }\n\n        if(res.movementX>0){\n\n          if(this.axisRangeStart-realDistance>= this.minRange){\n            this.axisRangeStart -= realDistance\n            this.axisRangeEnd -= realDistance\n          }else{\n            let t = this.axisRangeStart - this.minRange;\n            this.axisRangeStart = this.minRange;\n            this.axisRangeEnd -= t\n          }\n        }else{\n\n          if(this.axisRangeEnd + realDistance <= this.maxRange){\n          // //  debugger\n            this.axisRangeEnd += realDistance;\n            this.axisRangeStart += realDistance;\n          //   // debugger\n          }else{\n            let t = this.maxRange - this.axisRangeEnd ;\n            this.axisRangeStart += t;\n            this.axisRangeEnd =  this.maxRange\n            // debugger\n            // return\n          }\n        }\n\n        this.initAxisRenderRule();\n\n        D3.select(this.myscale.nativeElement)\n        .select('g.xaxis')\n        .call(\n          D3.axisBottom(\n            this.axisRenderRule\n          )\n          .tickSize(40)\n          .tickPadding(10)\n          .tickFormat(d=>{\n\n            return this.timeformat(d)\n          })\n        )\n\n        this.addPathToRecover()\n        this.updateSelection$.next( )\n      }\n    )\n  }\n  disableDragToMoveScale(){\n    this.dragToMoveDestroy$.next()\n  }\n\n}\n","\n<div class=\"svg-wrapper\" #scalewrapper>\n  <svg\n  (contextmenu)=\"$event.preventDefault()\"\n  [style.width]=\"svgWidth\"\n  [style.height]=\"svgHeight\"\n  #myscale class=\"scale-svg\">\n      <g class=\"xaxis\"></g>\n  </svg>\n  <div class=\"selection-wrapper\">\n    <div class=\"selection\" [style.left]=\"selectRender.start+'px'\" [style.width]=\"selectRender.end+'px'\" [class.isdragging]=\"isDragging\"></div>\n  </div>\n</div>\n\n<div style=\"margin-top: 20px;\">\n  start {{this.selection.start}}\n  end {{this.selection.end}}\n\n  <div>\n    format start{{timeformat(this.selection.start)}}\n\n    format end{{timeformat(this.selection.end)}}\n  </div>\n</div>\n\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}